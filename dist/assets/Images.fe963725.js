import{e,a3 as c,ad as j,c as x,k as h,aA as $,V as b,az as k,aC as I,ct as u,ag as _,S as n,ab as C,ac as v,u as y,m as g,N as m,c7 as M,l as d,bs as S,bt as L}from"./index.fe3486ef.js";import{b as z}from"./Folder.f9bebc2b.js";import{u as A}from"./index.321e0edd.js";import{d as E,a as G}from"./useUtil.fc181264.js";import{I as O}from"./ImageWithError.f081501f.js";import{O as F,g as H}from"./icon.8a2859dd.js";import{I as P}from"./helper.69ccffd9.js";import{M as T}from"./Layout.bd4089bd.js";import{G as V}from"./GridItem.9ddf0ac4.js";import"./video_box.b0d04bc0.js";import"./index.e051a4ab.js";import"./Paginator.2f649000.js";import"./index.79d73f9f.js";import"./api.7559bd6f.js";import"./EncodingSelect.39cba868.js";import"./FolderTree.940f876e.js";const W=t=>{const{isHide:i}=E();if(i(t.obj)||t.obj.type!==F.IMAGE)return null;const{setPathAs:o}=A(),r=e(j,{get color(){return c()},boxSize:"$12",get as(){return H(t.obj)}}),[a,l]=x(!1),f=h(()=>$()&&(a()||t.obj.selected)),{show:p}=z({id:1}),{rawLink:w}=G();return e(T.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.2},style:{"flex-grow":1},get children(){return e(b,{w:"$full",class:"image-item",p:"$1",spacing:"$1",rounded:"$lg",transition:"all 0.3s",border:"2px solid transparent",get _hover(){return{border:`2px solid ${c()}`}},onMouseEnter:()=>{l(!0),o(t.obj.name,t.obj.is_dir,!0)},onMouseLeave:()=>{l(!1)},onContextMenu:s=>{k(()=>{I(!1),u(t.index,!0,!0)}),p(s,{props:t.obj})},get children(){return e(_,{w:"$full",pos:"relative",get children(){return[e(n,{get when(){return f()},get children(){return e(P,{pos:"absolute",left:"$1",top:"$1",get checked(){return t.obj.selected},onChange:s=>{u(t.index,s.target.checked)}})}}),e(O,{h:"150px",w:"$full",objectFit:"cover",rounded:"$lg",shadow:"$md",get fallback(){return e(C,{size:"lg"})},fallbackErr:r,get src(){return w(t.obj)},loading:"lazy",onClick:()=>{v.emit("gallery",t.obj.name)}})]}})}})}})},oe=t=>{const i=y(),o=h(()=>e(M,{w:"$full",gap:"$1",templateColumns:"repeat(auto-fill, minmax(100px,1fr))",class:"image-folders",get children(){return e(g,{get each(){return m.objs.filter(r=>r.is_dir)},children:(r,a)=>e(V,{obj:r,get index(){return a()}})})}}));return e(b,{spacing:"$2",w:"$full",get children(){return[e(n,{get when(){return d.show_folder_in_image_view==="top"},get children(){return o()}}),e(n,{get when(){return t.images.length>0},get fallback(){return e(S,{m:"$2",get children(){return i("home.no_images")}})},get children(){return e(L,{w:"$full",gap:"$1",flexWrap:"wrap",class:"image-images",get children(){return e(g,{get each(){return m.objs},children:(r,a)=>e(W,{obj:r,get index(){return a()}})})}})}}),e(n,{get when(){return d.show_folder_in_image_view==="bottom"},get children(){return o()}})]}})};export{oe as default};
